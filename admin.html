<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WIKD Schedule Builder (Admin)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
  font-family: Helvetica, Arial, sans-serif;
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 20px;
  background: #111;
  color: #eee;
}

h1, h2 {
  color: #ff3b3b;
}

label {
  display: block;
  margin-top: 12px;
  font-weight: bold;
}

input, select, button, textarea {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
  background: #222;
  color: #fff;
  border: 1px solid #444;
}

button {
  background: #ff3b3b;
  border: none;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  background: #ff5a5a;
}

textarea {
  height: 300px;
  font-family: monospace;
}

.show {
  border-bottom: 1px solid #333;
  padding: 6px 0;
  font-size: 14px;
}

.instructions {
  background: #1a1a1a;
  padding: 15px;
  margin-bottom: 20px;
  border-left: 4px solid #ff3b3b;
}
</style>
</head>

<body>

<h1>ðŸ“» WIKD Schedule Builder</h1>

<div class="instructions">
  <p><strong>Instructions:</strong></p>
  <ol>
    <li>Upload show images to the <code>/images</code> folder</li>
    <li>Add each show using the form below</li>
    <li>Click <strong>Generate schedule.js</strong></li>
    <li>Copy and paste into <code>schedule.js</code></li>
    <li>Commit changes</li>
  </ol>
</div>

<h2>Add Show</h2>

<label>Day</label>
<select id="day">
  <option value="0">Sunday</option>
  <option value="1">Monday</option>
  <option value="2">Tuesday</option>
  <option value="3">Wednesday</option>
  <option value="4">Thursday</option>
  <option value="5">Friday</option>
  <option value="6">Saturday</option>
</select>

<label>Start Time (HH:MM AM/PM)</label>
<input id="start" placeholder="7:00 PM">

<label>End Time (HH:MM AM/PM)</label>
<input id="end" placeholder="9:00 PM">

<label>Image Filename (exact)</label>
<input id="image" placeholder="FRIDAY DJ Ray - The sound lounge (10pm-12am).png">

<button onclick="addShow()">Add Show</button>

<h2>Shows</h2>
<div id="shows"></div>

<h2>Generated schedule.js</h2>
<button onclick="generate()">Generate</button>
<textarea id="output"></textarea>

<script>
const shows = [];

function toMinutes(time) {
  const [t, ap] = time.trim().split(" ");
  let [h, m] = t.split(":").map(Number);
  if (ap.toUpperCase() === "PM" && h !== 12) h += 12;
  if (ap.toUpperCase() === "AM" && h === 12) h = 0;
  return h * 60 + m;
}

function addShow() {
  const day = document.getElementById("day").value;
  const start = document.getElementById("start").value;
  const end = document.getElementById("end").value;
  const image = document.getElementById("image").value;

  if (!start || !end || !image) {
    alert("Fill out all fields");
    return;
  }

  shows.push({
    day,
    start: toMinutes(start),
    end: toMinutes(end),
    image
  });

  render();
}

function render() {
  const el = document.getElementById("shows");
  el.innerHTML = "";
  shows.forEach(s => {
    const d = document.createElement("div");
    d.className = "show";
    d.textContent = `Day ${s.day} | ${s.start}-${s.end} | ${s.image}`;
    el.appendChild(d);
  });
}

function generate() {
  let out = "const FALLBACK_IMAGE = \"images/MONDAY OPEN STUDIO - 12AM - 10AM.png\";\n\n";
  out += "const weeklySchedule = {\n";

  const days = {};
  shows.forEach(s => {
    if (!days[s.day]) days[s.day] = [];
    days[s.day].push(s);
  });

  Object.keys(days).forEach(d => {
    out += `  ${d}: [\n`;
    days[d].sort((a,b)=>a.start-b.start).forEach(s => {
      out += `    { start: ${s.start}, end: ${s.end}, image: \"images/${s.image}\" },\n`;
    });
    out += "  ],\n";
  });

  out += "};";
  document.getElementById("output").value = out;
}
</script>

</body>
</html>
